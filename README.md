## 以下の画像処理手法についてOpenCV を用いる場合と用いない場合の両方のコード例をまとめてます。

* 画像の取り込み
* 動画像の取得
* グレースケール化
* 差分処理
* 2値化処理

| 手法       | OpenCV 使用       | OpenCV 不使用          |
| -------- | --------------- | ------------------- |
| グレースケール化 | `cv2.cvtColor`  | 平均値法, 輝度法      |
| 差分処理     | `cv2.absdiff`   | NumPy の差分計算         |
| 2値化      | `cv2.threshold` | NumPy のしきい値処理       |

---

# 1. 画像の取り込み

```python
import cv2
cap = cv2.VideoCapture(0)
ret, frame = cap.read()
```

---

# 2. 動画像の取得

```python
import cv2
cap = cv2.VideoCapture(0)
while True:
    ret, frame = cap.read()
    if not ret:
        break
```

# 3. グレースケール化（Grayscale Conversion）

グレースケール化とは、カラー（RGB）画像を明るさを表す1チャンネル画像に変換する処理。計算量を減らし、差分処理・2値化処理などの前処理として重要。

### 平均値法（(R + G + B) / 3）

RGB の値を単純平均する方法。実装は簡単だが、視覚的に不自然な明るさになりやすい。

### 輝度法（0.299R + 0.587G + 0.114B）

人間の視覚が緑に敏感である特性を反映した重み付け方法で、自然な明るさの白黒画像が得られる。OpenCV の `cv2.cvtColor` もこの方式をベースにしている。

### OpenCV の `cv2.cvtColor()`

高速で最も一般的な方法で、輝度法を内部処理として使用する。

---

# 4. 差分処理（Frame Differencing）

差分処理は、2枚の画像（フレーム）の画素ごとの差を取り、動いた部分だけを抽出する処理。動体検出や変化検出に広く用いられる。

### 差分の計算式

```
差分 = | 画像1 - 画像2 |
```

動いていない部分は差が小さく、動いた部分は差が大きくなるため、動きが白く強調される。

### OpenCV 版：`cv2.absdiff()`

高速でノイズにも強い差分計算ができます。

### NumPy 版

`np.abs()` を用いて絶対値を計算する。負の値を扱うため、一度 int 型に変換してから uint8 に戻す。

---

# 5. 2値化処理（Binarization / Thresholding）

2値化処理は、グレースケール画像を白（255）と黒（0）だけの画像に変換する技術。

### 2値化の式

```
画素値 > 閾値 → 白（255）
画素値 <= 閾値 → 黒（0）
```

物体検出・文字認識・輪郭抽出など多くの用途に使われる。

### OpenCV 版：`cv2.threshold()`

固定閾値を用いた標準的な2値化。高速で安定した結果が得られる。

### NumPy 版

`np.where()` を利用し、条件を満たす画素を白、その他を黒にする処理を実装する。OpenCV ほど高速ではない。
